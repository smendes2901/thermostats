(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t,a){e.exports=a.p+"static/media/thermometer.bf9e0b89.jpg"},188:function(e,t,a){},233:function(e,t,a){e.exports=a(477)},238:function(e,t,a){},309:function(e,t,a){},417:function(e,t,a){},437:function(e,t,a){},438:function(e,t,a){},445:function(e,t,a){},474:function(e,t){},477:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(4),o=a.n(l),c=(a(238),a(33)),i=a(57),u=a(108),s=a.n(u),m=a(26),f=a.n(m),p=function(e){e?f.a.defaults.headers.common.Authorization=e:delete f.a.defaults.headers.common.Authorization},d=a(20),E=function(e){return{type:"SET_CURRENT_USER",payload:e}},g=function(){return function(e){localStorage.removeItem("jwtToken"),p(!1),e(E({}))}},h=(a(87),a(5)),b=(a(262),a(118)),y=(a(120),a(73)),O=(a(268),a(225)),v=a(37),j=Object(d.b)((function(e){return{message:e.notification.message,status:e.notification.status}}),(function(e){return{clearNotification:function(){return e({type:"CLEAR_NOTIFICATION"})}}}))((function(e){var t=Object(n.useState)({message:null,status:null}),a=Object(v.a)(t,2),l=a[0],o=a[1],c=function(){o({message:null,status:null}),e.clearNotification()},i=function(e){O.a[e]({message:e.toUpperCase(),description:l.message,onClose:c,duration:2})};return Object(n.useEffect)((function(){o({message:e.message,status:e.status})}),[e]),Object(n.useEffect)((function(){l.message&&(200===l.status?i("success"):i("error"))}),[l]),r.a.createElement("div",null)})),w=a(111),N=a.n(w),T=(a(309),y.a.Text),I=Object(i.g)(Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),(function(e){return{logOutUser:function(){return e(g())}}}))((function(e){return r.a.createElement("div",null,e.isAuthenticated?r.a.createElement(b.a,{mode:"horizontal"},r.a.createElement(b.a.Item,{key:"title"},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{src:N.a,style:{width:"35px",height:"30px"},alt:"logo"}),r.a.createElement(T,{strong:!0},"THERMOSTAT"))),r.a.createElement(b.a.Item,{key:"logout",style:{float:"right"},onClick:function(){e.logOutUser(),e.history.push("/login")}},r.a.createElement(h.a,{type:"logout"}),"Logout")):null,r.a.createElement(j,null))}))),A=(a(76),a(35)),S=(a(186),a(28)),C=(a(88),a(45)),k=(a(134),a(72)),_=(a(188),function(){return r.a.createElement("div",null,r.a.createElement("img",{src:N.a,style:{width:"50px",height:"50px"},alt:"logo"}),r.a.createElement("div",null,r.a.createElement(y.a.Title,null,"THERMOSTAT")))}),x=k.a.Content,P=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),(function(e){return{loginUser:function(t){return e((a=t,function(e){f.a.post("/api/users/login",a).then((function(t){var a=t.data.token;localStorage.setItem("jwtToken",a),p(a);var n=s()(a);e(E(n))})).catch((function(t){e({type:"GET_NOTIFICATION",payload:t.response})}))}));var a}}}))(S.a.create()((function(e){Object(n.useEffect)((function(){e.isAuthenticated&&e.history.push("/")}),[e]);var t=e.form.getFieldDecorator;return r.a.createElement(x,null,r.a.createElement("div",{className:"logo"},r.a.createElement(_,null)),r.a.createElement("div",{className:"login-layout"},r.a.createElement(S.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields((function(t,a){t||e.loginUser(a)}))},className:"login-form"},r.a.createElement(S.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(h.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),r.a.createElement(S.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(S.a.Item,null,r.a.createElement("div",null,r.a.createElement(A.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")),"Or ",r.a.createElement(c.b,{className:"nav-link",to:"/register"},"Register now")))))}))),U=k.a.Content,D=Object(i.g)(Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),(function(e){return{registerUser:function(t,a){return e(function(e,t){return function(a){f.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){a({type:"GET_NOTIFICATION",payload:e.response})}))}}(t,a))}}}))(S.a.create()((function(e){Object(n.useEffect)((function(){e.isAuthenticated&&e.history.push("/")}),[e]);var t=e.form.getFieldDecorator;return r.a.createElement(U,null,r.a.createElement("div",{className:"logo"},r.a.createElement(_,null)),r.a.createElement("div",{className:"login-layout"},r.a.createElement(S.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields((function(t,a){t||e.registerUser(a,e.history)}))},className:"register-form"},r.a.createElement(S.a.Item,null,t("name",{rules:[{required:!0,message:"Please input your Name!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Name"}))),r.a.createElement(S.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(h.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),r.a.createElement(S.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your password!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(S.a.Item,null,t("password2",{rules:[{required:!0,message:"Please confirm your Password!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm Password"}))),r.a.createElement(S.a.Item,null,r.a.createElement("div",null,r.a.createElement(A.a,{type:"primary",htmlType:"submit",className:"register-form-button"},"Register")),"Already have an account? ",r.a.createElement(c.b,{className:"nav-link",to:"/login"},"Log In")))))})))),R=(a(478),a(161)),F=(a(417),function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),i=Object(v.a)(o,2),u=i[0],s=i[1];Object(n.useEffect)((function(){f.a.get("/api/readings").then((function(e){l(e.data)})).catch((function(e){console.log(e)}))}),[]);var m=a.filter((function(e){return-1!==e.toLowerCase().indexOf(u)}));return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(C.a,{type:"text",placeholder:"Search...",onChange:function(e){return s(e.target.value.toLowerCase())}})),r.a.createElement("div",{className:"file-list"},r.a.createElement(R.a,{bordered:!0,dataSource:m,renderItem:function(e){return r.a.createElement(c.b,{to:"details/".concat(e)},r.a.createElement(R.a.Item,null,r.a.createElement(y.a.Text,{mark:!0},e.split(".")[1].toUpperCase())," ",e))}})))}),L=a(230),q=Object(d.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(L.a)(e,["component","auth"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))})),z=(a(192),a(115)),M=(a(420),a(52)),V=(a(437),Object(d.b)(null,(function(e){return{setNotification:function(t){return e({type:"GET_NOTIFICATION",payload:t})}}}))((function(e){var t=Object(n.useState)(null),a=Object(v.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)([]),i=Object(v.a)(c,2),u=i[0],s=i[1],m=e.setNotification,p=e.fileName;Object(n.useEffect)((function(){f.a.post("/api/readings",{name:p}).then((function(e){s(e.data)})).catch((function(e){m(e.response)}))}),[p,m]);var d=Object(n.useState)(null),E=Object(v.a)(d,2),g=E[0],h=E[1];return r.a.createElement("div",null,u.length>1?r.a.createElement("div",null,r.a.createElement(M.g,{style:{overflow:"hidden"},animation:!0,xType:"time",xDomain:g&&[g.left,g.right],yDomain:g&&[g.bottom,g.top],width:1200,height:300},r.a.createElement(M.c,null),r.a.createElement(M.e,null),r.a.createElement(M.h,null),r.a.createElement(M.f,null),r.a.createElement(M.d,{onValueMouseOver:function(e){return function(e){o(e)}(e)},onValueMouseOut:function(){o(null)},data:u}),r.a.createElement(M.a,{onBrushEnd:function(e){return h(e)},onDrag:function(e){h({bottom:g.bottom+(e.top-e.bottom),left:g.left-(e.right-e.left),right:g.right-(e.right-e.left),top:g.top+(e.top-e.bottom)})}}),l?r.a.createElement(M.b,{value:l}):null)):r.a.createElement("div",{className:"spin-space"},r.a.createElement(z.a,{size:"large",className:"spin-position"})),r.a.createElement(A.a,{type:"primary",style:{float:"left",margin:"10px"},onClick:function(){return h(null)}},"Reset Zoom"),r.a.createElement(A.a,{type:"default",icon:"cloud-upload",style:{float:"left",margin:"10px"},onClick:function(){return function(e){f.a.post("/api/readings/upload",{name:e}).then((function(e){m(e)})).catch((function(e){m(e.response)}))}(e.fileName)}},"Upload"))}))),G=(a(438),k.a.Content),X=Object(i.g)((function(e){return r.a.createElement("div",null,r.a.createElement(G,null,r.a.createElement("div",{className:"chart-boundaries"},r.a.createElement(V,{fileName:e.match.params.id}))))})),B=(a(439),a(222)),H=(a(441),a(227)),J=(a(443),a(229)),W=a(226),Z=(a(445),a(220)),$=a.n(Z),K=a(221),Q=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],o=a[1];Object(n.useEffect)((function(){e.isAuthenticated&&(f.a.get("/api/alerts").then((function(e){o(e.data.reverse())})).catch((function(e){console.log(e.response)})),$()("http://localhost:5000").on("test",(function(e){o((function(t){return[e.msg].concat(Object(W.a)(t))}))})))}),[e]);return e.isAuthenticated?r.a.createElement(B.a,{className:"popover",content:l.map((function(e){return r.a.createElement(J.a,{key:e._id,message:e.message,type:e.status,banner:!0,showIcon:!0})})),onVisibleChange:K.debounce((function(e){if(0===l.length)return null;if(!1===e){var t=[];l.forEach((function(e){t.push(e._id)})),f.a.post("/api/alerts/update",{replace:{read:!0},idArray:t}).then((function(){o([])})).catch((function(e){console.log(e.response)}))}}),500),title:r.a.createElement("span",null,"Messages")},r.a.createElement(H.a,{count:l.length,className:"alert-badge"},r.a.createElement(A.a,{className:"alert-button",type:"primary",shape:"circle",size:"large"},r.a.createElement(h.a,{className:"alert-icon",type:"bell"})))):null})),Y=function(e){if(localStorage.jwtToken){p(localStorage.jwtToken);var t=s()(localStorage.jwtToken);e.setCurrentUser(t);var a=Date.now()/1e3;t.exp<a&&(e.logOutUser(),e.history.push("/"))}};var ee=Object(d.b)(null,(function(e){return{setCurrentUser:function(t){return e(E(t))},logOutUser:function(){return e(g())}}}))((function(e){return Object(n.useEffect)((function(){Y(e)}),[e]),r.a.createElement(c.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement(i.b,{path:"/login",component:P}),r.a.createElement(i.b,{path:"/register",component:D}),r.a.createElement(i.d,null,r.a.createElement(q,{exact:!0,path:"/",component:F})),r.a.createElement(i.d,null,r.a.createElement(q,{exact:!0,path:"/details/:id",component:X})),r.a.createElement(Q,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=a(56),ae=a(223),ne=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length};function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(a,!0).forEach((function(t){Object(ae.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var oe={isAuthenticated:!1,user:{}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return le({},e,{isAuthenticated:!ne(t.payload),user:t.payload});default:return e}},ie={message:"",status:200},ue=Object(te.c)({auth:ce,notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case"GET_NOTIFICATION":return{message:a.data,status:a.status};case"CLEAR_NOTIFICATION":return{message:null,status:null};default:return e}}}),se=a(224),me=Object(te.e)(ue,Object(te.d)(Object(te.a)(se.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(r.a.createElement(d.a,{store:me},r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[233,1,2]]]);
//# sourceMappingURL=main.68bb0780.chunk.js.map