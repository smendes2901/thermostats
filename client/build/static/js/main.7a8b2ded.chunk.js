(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{185:function(e,t,a){},209:function(e,t,a){e.exports=a.p+"static/media/thermometer.bf9e0b89.jpg"},230:function(e,t,a){e.exports=a(473)},235:function(e,t,a){},306:function(e,t,a){},414:function(e,t,a){},434:function(e,t,a){},441:function(e,t,a){},470:function(e,t){},473:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(4),l=a.n(o),c=(a(235),a(37)),i=a(56),u=a(109),s=a.n(u),m=a(26),f=a.n(m),p=function(e){e?f.a.defaults.headers.common.Authorization=e:delete f.a.defaults.headers.common.Authorization},d=a(20),h=function(e){return{type:"SET_CURRENT_USER",payload:e}},E=function(){return function(e){localStorage.removeItem("jwtToken"),p(!1),e(h({}))}},g=(a(88),a(5)),b=(a(259),a(117)),O=(a(168),a(84)),y=(a(265),a(223)),v=a(28),j=Object(d.b)((function(e){return{message:e.notification.message,status:e.notification.status}}),(function(e){return{clearNotification:function(){return e({type:"CLEAR_NOTIFICATION"})}}}))((function(e){var t=Object(n.useState)({message:null,status:null}),a=Object(v.a)(t,2),o=a[0],l=a[1],c=function(){console.log("executed"),l({message:null,status:null}),e.clearNotification()},i=function(e){y.a[e]({message:e.toUpperCase(),description:o.message,onClose:c,duration:2})};return Object(n.useEffect)((function(){l({message:e.message,status:e.status})}),[e]),Object(n.useEffect)((function(){o.message&&(200===o.status?i("success"):i("error"))}),[o]),r.a.createElement("div",null)})),w=a(209),N=a.n(w),T=(a(306),O.a.Title,O.a.Text),I=Object(i.g)(Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),(function(e){return{logOutUser:function(){return e(E())}}}))((function(e){return r.a.createElement("div",null,r.a.createElement(b.a,{mode:"horizontal"},r.a.createElement(b.a.Item,{key:"title"},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{src:N.a,style:{width:"35px",height:"30px"}}),r.a.createElement(T,{strong:!0},"THERMOSTATS"))),r.a.createElement(b.a.Item,{key:"logout",style:{float:"right"},onClick:function(){e.logOutUser(),e.history.push("/login")}},r.a.createElement(g.a,{type:"logout"}),"Logout")),r.a.createElement(j,null))}))),S=(a(76),a(35)),A=(a(183),a(29)),C=(a(89),a(45)),k=(a(132),a(73)),_=(a(185),k.a.Content),x=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),(function(e){return{loginUser:function(t){return e((a=t,function(e){f.a.post("http://localhost:5000/api/users/login",a).then((function(t){var a=t.data.token;localStorage.setItem("jwtToken",a),p(a);var n=s()(a);e(h(n))})).catch((function(t){e({type:"GET_NOTIFICATION",payload:t.response})}))}));var a}}}))(A.a.create()((function(e){Object(n.useEffect)((function(){e.isAuthenticated&&e.history.push("/")}),[e]);var t=e.form.getFieldDecorator;return r.a.createElement(_,null,r.a.createElement("div",{className:"login-layout"},r.a.createElement(A.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields((function(t,a){t||e.loginUser(a)}))},className:"login-form"},r.a.createElement(A.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(g.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),r.a.createElement(A.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(A.a.Item,null,r.a.createElement("div",null,r.a.createElement(S.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")),"Or ",r.a.createElement(c.b,{className:"nav-link",to:"/register"},"Register now")))))}))),P=k.a.Content,U=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),(function(e){return{registerUser:function(t){return e((a=t,function(e){f.a.post("http://localhost:5000/api/users/register",a).then((function(e){return n.push("/login")})).catch((function(t){e({type:"GET_NOTIFICATION",payload:t.response})}))}));var a,n}}}))(A.a.create()((function(e){var t=Object(n.useState)(!1),a=Object(v.a)(t,2);a[0],a[1];Object(n.useEffect)((function(){e.isAuthenticated&&e.history.push("/")}),[e]);var o=e.form.getFieldDecorator;return r.a.createElement(P,null,r.a.createElement("div",{className:"login-layout"},r.a.createElement(A.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields((function(t,a){t||e.registerUser(a)}))},className:"register-form"},r.a.createElement(A.a.Item,null,o("name",{rules:[{required:!0,message:"Please input your Name!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Name"}))),r.a.createElement(A.a.Item,null,o("email",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(g.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),r.a.createElement(A.a.Item,null,o("password",{rules:[{required:!0,message:"Please input your password!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(A.a.Item,null,o("password2",{rules:[{required:!0,message:"Please confirm your Password!"}]})(r.a.createElement(C.a,{prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm Password"}))),r.a.createElement(A.a.Item,null,r.a.createElement("div",null,r.a.createElement(S.a,{type:"primary",htmlType:"submit",className:"register-form-button"},"Register")),"Already have an account? ",r.a.createElement(c.b,{className:"nav-link",to:"/login"},"Log In")))))}))),D=(a(474),a(157)),R=(a(414),function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),i=Object(v.a)(l,2),u=i[0],s=i[1];Object(n.useEffect)((function(){f.a.get("http://localhost:5000/api/readings").then((function(e){o(e.data)})).catch((function(e){console.log(e)}))}),[]);var m=a.filter((function(e){return-1!==e.toLowerCase().indexOf(u)}));return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(C.a,{type:"text",placeholder:"Search...",onChange:function(e){return s(e.target.value.toLowerCase())}})),r.a.createElement("div",{className:"file-list"},r.a.createElement(D.a,{bordered:!0,dataSource:m,renderItem:function(e){return r.a.createElement(c.b,{to:"details/".concat(e)},r.a.createElement(D.a.Item,null,r.a.createElement(O.a.Text,{mark:!0},e.split(".")[1].toUpperCase())," ",e))}})))}),F=a(227),L=Object(d.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(F.a)(e,["component","auth"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))})),q=(a(417),a(51)),V=Object(d.b)(null,(function(e){return{setNotification:function(t){return e({type:"GET_NOTIFICATION",payload:t})}}}))((function(e){var t=Object(n.useState)(null),a=Object(v.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)([]),i=Object(v.a)(c,2),u=i[0],s=i[1],m=e.setNotification,p=e.fileName;Object(n.useEffect)((function(){f.a.post("http://localhost:5000/api/readings",{name:p}).then((function(e){s(e.data)})).catch((function(e){m(e.response)}))}),[p,m]);var d=Object(n.useState)(null),h=Object(v.a)(d,2),E=h[0],g=h[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(q.g,{style:{overflow:"hidden"},animation:!0,xType:"time",xDomain:E&&[E.left,E.right],yDomain:E&&[E.bottom,E.top],width:1200,height:300},r.a.createElement(q.c,null),r.a.createElement(q.e,null),r.a.createElement(q.h,null),r.a.createElement(q.f,null),r.a.createElement(q.d,{onValueMouseOver:function(e){return function(e){console.log(e),l(e)}(e)},onValueMouseOut:function(){return console.log(),void l(null)},data:u}),r.a.createElement(q.a,{onBrushEnd:function(e){return g(e)},onDrag:function(e){g({bottom:E.bottom+(e.top-e.bottom),left:E.left-(e.right-e.left),right:E.right-(e.right-e.left),top:E.top+(e.top-e.bottom)})}}),o?r.a.createElement(q.b,{value:o}):null)),r.a.createElement(S.a,{type:"primary",style:{float:"left",margin:"10px"},onClick:function(){return g(null)}},"Reset Zoom"),r.a.createElement(S.a,{type:"default",icon:"cloud-upload",style:{float:"left",margin:"10px"},onClick:function(){return function(e){f.a.post("http://localhost:5000/api/readings/upload",{name:e}).then((function(e){m(e)})).catch((function(e){m(e.response)}))}(e.fileName)}},"Upload"))})),z=(a(434),k.a.Content),G=function(e){return r.a.createElement("div",null,r.a.createElement(z,null,r.a.createElement("div",{className:"chart-boundaries"},r.a.createElement(V,{fileName:e.match.params.id}))))},M=(a(435),a(219)),X=(a(437),a(224)),B=(a(439),a(225)),J=a(222),W=(a(441),a(217)),H=a.n(W),Z=a(218),$=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(!1),i=Object(v.a)(c,2);i[0],i[1];Object(n.useEffect)((function(){e.isAuthenticated&&(f.a.get("http://localhost:5000/api/alerts").then((function(e){l(e.data.reverse())})).catch((function(e){console.log(e.response)})),H()("http://localhost:5000").on("test",(function(e){l((function(t){return[e.msg].concat(Object(J.a)(t))}))})))}),[e]);return e.isAuthenticated?r.a.createElement(M.a,{className:"popover",content:o.map((function(e){return r.a.createElement(B.a,{key:e._id,message:e.message,type:e.status,banner:!0,showIcon:!0})})),onVisibleChange:Z.debounce((function(e){if(0===o.length)return null;if(!1===e){var t=[];o.forEach((function(e){t.push(e._id)})),f.a.post("http://localhost:5000/api/alerts/update",{replace:{read:!0},idArray:t}).then((function(){l([])})).catch((function(e){console.log(e.response)}))}}),500),title:r.a.createElement("span",null,"Messages")},r.a.createElement(X.a,{count:o.length,className:"alert-badge"},r.a.createElement(S.a,{className:"alert-button",type:"primary",shape:"circle",size:"large"},r.a.createElement(g.a,{className:"alert-icon",type:"bell"})))):null})),K=function(e){if(localStorage.jwtToken){p(localStorage.jwtToken);var t=s()(localStorage.jwtToken);e.setCurrentUser(t);var a=Date.now()/1e3;t.exp<a&&(e.logOutUser(),window.location.href="/login")}};var Q=Object(d.b)(null,(function(e){return{setCurrentUser:function(t){return e(h(t))},logOutUser:function(){return e(E())}}}))((function(e){return Object(n.useEffect)((function(){K(e)}),[e]),r.a.createElement(c.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement(i.b,{path:"/login",component:x}),r.a.createElement(i.b,{path:"/register",component:U}),r.a.createElement(i.d,null,r.a.createElement(L,{exact:!0,path:"/",component:R})),r.a.createElement(i.d,null,r.a.createElement(L,{exact:!0,path:"/details/:id",component:G})),r.a.createElement($,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(55),ee=a(220),te=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length};function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(ee.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re={isAuthenticated:!1,user:{}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return ne({},e,{isAuthenticated:!te(t.payload),user:t.payload});default:return e}},le={message:"",status:200},ce=Object(Y.c)({auth:oe,notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case"GET_NOTIFICATION":return{message:a.data,status:a.status};case"CLEAR_NOTIFICATION":return{message:null,status:null};default:return e}}}),ie=a(221),ue=Object(Y.e)(ce,Object(Y.d)(Object(Y.a)(ie.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));l.a.render(r.a.createElement(d.a,{store:ue},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[230,1,2]]]);
//# sourceMappingURL=main.7a8b2ded.chunk.js.map